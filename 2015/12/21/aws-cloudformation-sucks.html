<!DOCTYPE html>
<html>
  <head>
    <title>Why AWS CloudFormation sucks?!</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    <link rel="apple-touch-icon" sizes="57x57" href="//jan.brennenstuhl.me/themes/uno-zen/assets/img/apple-touch-icon-57x57.png?v=E669GYkjyb?v=1.0.0">
    <link rel="apple-touch-icon" sizes="60x60" href="//jan.brennenstuhl.me/themes/uno-zen/assets/img/apple-touch-icon-60x60.png?v=E669GYkjyb?v=1.0.0">
    <link rel="apple-touch-icon" sizes="72x72" href="//jan.brennenstuhl.me/themes/uno-zen/assets/img/apple-touch-icon-72x72.png?v=E669GYkjyb?v=1.0.0">
    <link rel="apple-touch-icon" sizes="76x76" href="//jan.brennenstuhl.me/themes/uno-zen/assets/apple-touch-icon-76x76.png?v=E669GYkjyb?v=1.0.0">
    <link rel="apple-touch-icon" sizes="114x114" href="//jan.brennenstuhl.me/themes/uno-zen/assets/img/apple-touch-icon-114x114.png?v=E669GYkjyb?v=1.0.0">
    <link rel="apple-touch-icon" sizes="120x120" href="//jan.brennenstuhl.me/themes/uno-zen/assets/img/apple-touch-icon-120x120.png?v=E669GYkjyb?v=1.0.0">
    <link rel="apple-touch-icon" sizes="144x144" href="//jan.brennenstuhl.me/themes/uno-zen/assets/img/apple-touch-icon-144x144.png?v=E669GYkjyb?v=1.0.0">
    <link rel="apple-touch-icon" sizes="152x152" href="//jan.brennenstuhl.me/themes/uno-zen/assets/img/apple-touch-icon-152x152.png?v=E669GYkjyb?v=1.0.0">
    <link rel="apple-touch-icon" sizes="180x180" href="//jan.brennenstuhl.me/themes/uno-zen/assets/img/apple-touch-icon-180x180.png?v=E669GYkjyb?v=1.0.0">
    <link rel="icon" type="image/png" href="//jan.brennenstuhl.me/themes/uno-zen/assets/img/favicon-32x32.png?v=E669GYkjyb?v=1.0.0" sizes="32x32">
    <link rel="icon" type="image/png" href="//jan.brennenstuhl.me/themes/uno-zen/assets/img/favicon-194x194.png?v=E669GYkjyb?v=1.0.0" sizes="194x194">
    <link rel="icon" type="image/png" href="//jan.brennenstuhl.me/themes/uno-zen/assets/img/favicon-96x96.png?v=E669GYkjyb?v=1.0.0" sizes="96x96">
    <link rel="icon" type="image/png" href="//jan.brennenstuhl.me/themes/uno-zen/assets/img/android-chrome-192x192.png?v=E669GYkjyb?v=1.0.0" sizes="192x192">
    <link rel="icon" type="image/png" href="//jan.brennenstuhl.me/themes/uno-zen/assets/img/favicon-16x16.png?v=E669GYkjyb?v=1.0.0" sizes="16x16">
    <link rel="manifest" href="//jan.brennenstuhl.me/themes/uno-zen/assets/img/manifest.json?v=E669GYkjyb?v=1.0.0">
    <link rel="mask-icon" href="//jan.brennenstuhl.me/themes/uno-zen/assets/img/safari-pinned-tab.svg?v=E669GYkjyb?v=1.0.0" color="#e74c3c">
    <link rel="shortcut icon" href="//jan.brennenstuhl.me/themes/uno-zen/assets/img/favicon.ico?v=E669GYkjyb?v=1.0.0">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="//jan.brennenstuhl.me/themes/uno-zen/assets/img/mstile-144x144.png?v=E669GYkjyb?v=1.0.0">
    <meta name="msapplication-config" content="//jan.brennenstuhl.me/themes/uno-zen/assets/img/browserconfig.xml?v=E669GYkjyb?v=1.0.0">
    <meta name="theme-color" content="#e74c3c">
    <link rel="stylesheet" type="text/css" href="//jan.brennenstuhl.me/themes/uno-zen/assets/css/uno-zen.css?v=1.0.0" />
    <link rel="canonical" href="http://jan.brennenstuhl.me/2015/12/21/aws-cloudformation-sucks.html" />
    
    <meta property="og:site_name" content="Jan Brennenstuhl" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Why AWS CloudFormation sucks?!" />
    <meta property="og:description" content="AWS CloudFormation (CFN) is a file-based interface for provisioning AWS resources and in that way is Amazons answer on the &#x27;Infrastructure as Code&#x27; paradigm. I am a huge fan of this approach and CFN is a big step into the..." />
    <meta property="og:url" content="http://jan.brennenstuhl.me/2015/12/21/aws-cloudformation-sucks.html" />
    <meta property="article:published_time" content="2015-12-20T23:00:00.000Z" />
    <meta property="article:modified_time" content="2016-03-14T11:53:17.633Z" />
    <meta property="article:tag" content="aws" />
    <meta property="article:tag" content="cloud development" />
    <meta property="article:tag" content="devops" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Why AWS CloudFormation sucks?!" />
    <meta name="twitter:description" content="AWS CloudFormation (CFN) is a file-based interface for provisioning AWS resources and in that way is Amazons answer on the &#x27;Infrastructure as Code&#x27; paradigm. I am a huge fan of this approach and CFN is a big step into the..." />
    <meta name="twitter:url" content="http://jan.brennenstuhl.me/2015/12/21/aws-cloudformation-sucks.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Jan Brennenstuhl",
    "author": {
        "@type": "Person",
        "name": "Jan Brennenstuhl",
        "image": "https://avatars.githubusercontent.com/u/2291138?v=3",
        "url": "undefined/author/undefined",
        "sameAs": "http://jan.brennenstuhl.me"
    },
    "headline": "Why AWS CloudFormation sucks?!",
    "url": "http://jan.brennenstuhl.me/2015/12/21/aws-cloudformation-sucks.html",
    "datePublished": "2015-12-20T23:00:00.000Z",
    "dateModified": "2016-03-14T11:53:17.633Z",
    "keywords": "aws,  cloud development,  devops",
    "description": "AWS CloudFormation (CFN) is a file-based interface for provisioning AWS resources and in that way is Amazons answer on the &#x27;Infrastructure as Code&#x27; paradigm. I am a huge fan of this approach and CFN is a big step into the..."
}
    </script>

    <meta name="generator" content="Ghost ?" />
    <link rel="alternate" type="application/rss+xml" title="Jan Brennenstuhl" href="http://jan.brennenstuhl.me/rss" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
  </head>
  <body class="post-template tag-aws tag-cloud-development tag-devops">
    <header id="menu-button" class="expanded">
      <a><i class="icon icon-list"></i></a>
    </header>
    <aside class="cover" style="background: url(https://drscdn.500px.org/photo/137423293/q%3D80_m%3D2000/17ca7dd794eb565790909405ee967925) center/cover no-repeat fixed">
      <div class="cover container">
        <div class="profile">
          <a id="avatar-link" title="link to homepage for Jan Brennenstuhl" href="http://jan.brennenstuhl.me/#open">
            <img src="http://jan.brennenstuhl.me/images/jan-brennenstuhl.jpg" alt="Jan Brennenstuhl avatar" class="profile avatar rounded hvr-buzz-out" />
            <h1 id="profile-title">Jan Brennenstuhl</h1>
            <h3 id="profile-resume"></h3>
          </a>
    
          <hr class="divider long" />
          <p>I&#x27;m a full-stack web developer, open data activist &amp; clean code artist. I live in Berlin, blog about code, tech and cloud. Currently working for Immobilienscout24.de </p>
          <hr class="divider short" />
          <div class="navigation">
            <div class="profile contact">
              
              <nav class="navigation right">
                <ul class="social expanded">
              
              
                  <!-- Twitter -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://twitter.com/jbspeakr" title="Twitter account">
                      <i class='icon icon-social-twitter'></i>
                      <span class="label">Twitter</span>
                    </a>
                  </li>
              
              
                  <!-- Github -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://github.com/jbspeakr" title="Github account">
                      <i class='icon icon-social-github'></i>
                      <span class="label">Github</span>
                    </a>
                  </li>
                  </li>
              
                  <!-- Github -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://www.instagram.com/jbspeakr/" title="Instagram account">
                      <i class='icon icon-social-instagram'></i>
                      <span class="label">Instagram</span>
                    </a>
                  </li>
                  </li>
              
              
              
                  <!-- LinkedIn -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://linkedin.com/in/jbspeakr" title="LinkedIn account">
                      <i class='icon icon-social-linkedin'></i>
                      <span class="label">LinkedIn</span>
                    </a>
                  </li>
              
                  <!-- Email -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="mailto:jan@brennenstuhl.me" title="Email jan@brennenstuhl.me">
                      <i class='icon icon-mail'></i>
                      <span class="label">Email</span>
                    </a>
                  </li>
              
                </ul>
              </nav>
              <!-- <section class="icon icon-search" id="search-container">
      <hr class="divider short" />
      <form id="search-form">
        <input type="text", name="search", placeholder="git, css, javascript,..." id="search-field" />
      </form>
    </section>
     -->
            </div>
          </div>
        </div>
      </div>
    </aside>
    <main>
      <section id="search-results"></section>
      <section class="content">
        

  <article class="post tag-aws tag-cloud-development tag-devops">
    <header>
      <div class="post meta">
        <time datetime="21 Dec 2015">21 Dec 2015</time>
        <span class="post tags">in <a href="http://jan.brennenstuhl.me/tag/aws">aws</a> <a href="http://jan.brennenstuhl.me/tag/cloud-development"> cloud development</a> <a href="http://jan.brennenstuhl.me/tag/devops"> devops</a></span>


        <span class="post reading-time"> ~ <span></span> read.</span>
      </div>
      <a alt="Tweet 'Why AWS CloudFormation sucks?!'" href="https://twitter.com/intent/tweet?text=Why%20AWS%20CloudFormation%20sucks%3F!%20%C2%BB&amp;hashtags=aws, cloud development, devops&amp;url=http://jan.brennenstuhl.me/2015/12/21/aws-cloudformation-sucks.html">
        
        <h1 class="icon-reverse icon-social-twitter-post" id="post-title">Why AWS CloudFormation sucks?!</h1>
      </a>
    </header>

    <div id="post-content" class="post tag-aws tag-cloud-development tag-devops">
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://aws.amazon.com/cloudformation/">AWS CloudFormation</a> (CFN) is a file-based interface for provisioning AWS resources and in that way is Amazons answer on the '<a href="http://www.thoughtworks.com/insights/blog/infrastructure-code-reason-smile">Infrastructure as Code</a>' paradigm. I am a huge fan of this approach and CFN is a big step into the right direction as it supports not just common DevOps ideas, by allowing devs to create, update and delete the operational infrastructure they need with their own tools (a text editor, version control and tests), but also enables you to think different about your IT infrastructure and how to work with it (e.g. just think about immutable stacks). However, I see some issues that become more important if you work with CloudFormation on a daily basis as me and my colleagues at ImmobilienScout24 do&#8230;&#8203;</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_json_lang_wtf">JSON Lang, WTF?!</h2>
<div class="sectionbody">
<div class="paragraph">
<p>CloudFormation templates are simple JSON-formatted text files that (in theory) can easily be created and maintained by hand as nowadays every dev (and/ or ops) should be able to read and write valid JSON. However, AWS CloudFormation uses the originally static '<a href="http://json.org/">lightweight data-interchange format</a>' as a scripting language, allowing e.g. the definition and usage of parameter and (somehow crazy) <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference.html">intrinsic function</a> references.</p>
</div>
<div class="paragraph">
<p>In my eyes, this is a heavy misusage that leads to several problems regarding complexity and comprehensibility. You can find several deterrent examples that illustrate this right in the official AWS developers guide. If you still don&#8217;t think JSON is a syntax-bloated, hard-to-read data format just have a look on how to define <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-datapipeline-pipeline.html#d0e32425">DataPipelines using CloudFormation</a> and tell me you like it and that you are able to easily understand all the definitions as well as their interactions. It took me some time&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>But that&#8217;s not even the worst part. JSON also lacks some feature substance that some devs would regard heavily essential. In contrast to its technical superset YAML, JSON is not aware of e.g. comments or user defined data types. In my eyes, this is a huge downside and a massive argument against Amazons classical CloudFormation design.</p>
</div>
<div class="paragraph">
<p>All in all I don&#8217;t quite get the whys and reasons which made Amazons engineers believe that the abuse of JSON for scripting would be a better and more innovative idea than go for something like an established scripting language like Python or JavaScript.</p>
</div>
<div class="paragraph">
<p>But enough JSON-bashing for now. Let&#8217;s solve at least some of our AWS CloudFormation issues.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cfn_sphere">CFN-Sphere</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Currently there are a couple of tools around that sit on top of CFN as an abstraction layer and offer not just a YAML-based config approach, but also further functionality that comes in handy if you work with infrastructure as code during your everyday business.</p>
</div>
<div class="paragraph">
<p>One of those tools is <a href="https://github.com/cfn-sphere/cfn-sphere">CFN-Sphere</a>, a lightweight Python-tool that aims to simplify AWS CloudFormation handling not just for infrasturcture automation but also for human interaction. Initially built by <a href="https://github.com/marco-hoyer">Marco Hoyer</a> (one of my ImmobilienScout24 colleagues) CFN-Sphere comes with fundamental support for e.g. cross stack parameter references and automatic stack dependency resolution including circular dependency detection. Both are amazing features also for smaller AWS infrastructure definitions like the backup and staging environment for DynamoDB tables I am currently working on (More on that topic in one of the upcoming posts).</p>
</div>
<div class="paragraph">
<p>So if you are stuggling with your with your CloudFormation config or if you have a certain feeling that CFN files having around several hundred lines of code are almost unmaintainable, make sure to check out CFN-Sphere and its stack template feature. And help making it even greater by becoming a contributor!</p>
</div>
</div>
</div>
    </div>

    <div class="post related">

    </div>

    <footer class="post comments">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
        var disqus_shortname = 'janbrennenstuhl'; // required: replace example with your forum shortname
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </footer>

  </article>


        <footer>
          <span class="copyright">
            &copy; 2016. All rights reserved. Built with <a href="https://github.com/Kikobeats/uno-zen" target="_blank">Uno Zen</a> under <a href="http://hubpress.io/" target="_blank">HubPress</a>.
          </span>
        </footer>
      </section>
    </main>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();      
      </script>
    <script src="//jan.brennenstuhl.me/themes/uno-zen/assets/js/uno-zen.js?v=1.0.0" type="text/javascript" charset="utf-8"></script>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-36462674-4', 'auto');
    ga('send', 'pageview');

    </script>
  </body>
</html>
